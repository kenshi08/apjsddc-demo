formatVersion: 1
name: basic-cloudinit
version: 1.2
inputs: {}
resources:
  basic-iaas:
    type: Cloud.Machine
    properties:
      tags:
        - value: owner
          key: '${env.requestedBy}'
      image: ubuntu1604
      flavor: small
      constraints:
        - tag: 'platform:aws'
        - tag: 'env:test'
      networks:
        - network: '${resource.demo-net.id}'
      cloudConfig: |
        package_update: true
        packages:
        – python
        users:
          – name: ubuntu
            ssh-authorized-keys:
              – ssh-rsa AAAAB3NzaC1yc2EAAAABJQAAAQEA831LifYON4t7lWDRH/vPcTMRG9w/4rMBMLBRs6MIRnq2ch4KJoDKwyWTcYrDLmKUEPsaVzGnznL5zWxzBLL8oaKE5gMPrzWQUVMn7KtMMKyduLuHy50N4x+AY4cEhhch7mLBFOMeeGA4jTJTzbbqZox9zST0BrhNaf+cdqc+jpM11KTOjAP8961xhfTh6aRcBZadnKqBzA+RJ8hzzsAQSuSShaB+t/i2zkfMTzsm0mXlSmP9eFDADcra5e0uFgedCfxITqgcZIu8deHUc5cqIOS+NB+4qbGcgLeEtpBtHJ1Y402+mwVU4iDJwmC+KHXd8jlydLKVaivVhOZmprh/Cw==
  demo-net:
    type: Cloud.Network
    properties:
      name: demo-net
      networkType: existing
      constraints:
        - tag: 'function:public'
